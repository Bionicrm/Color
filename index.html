<!DOCTYPE html>

<html lang="en">

    <head>
        <meta charset="UTF-8">

        <style>
            :root, body {
                background-color: #FEFEFE;
                background-image: linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB), linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB);
                background-image: -moz-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB), -moz-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB);
                background-image: -ms-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB), -ms-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB);
                background-image: -o-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB), -o-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB);
                background-image: -webkit-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB), -webkit-linear-gradient(45deg, #CBCBCB 25%, transparent 25%, transparent 75%, #CBCBCB 75%, #CBCBCB);
                background-size:30px 30px;
                -moz-background-size: 30px 30px;
                -webkit-background-size: 30px 30px;
                background-position: 0 0, 15px 15px;
                color: #FFF;
                font-family: monospace;
                font-size: 1.1em;
                text-align: center;
                text-shadow: 0 0 1px #000;

                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }

            .colour-bg {
                transition: background-color .5s;

                width: 100%;
                height: 100%;
                position: absolute;
            }

            .colour-container {
                background-color: rgba(0, 0, 0, .5);
                border-radius: 10px;

                margin: 0 -50% 0 0;
                padding: 1em;
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
            }

            .colour-button {
                background-color: #FFF;
                border: none;
                border-bottom: 3px solid rgba(0, 0, 0, .25);
                border-radius: 3px;
                color: #000;
                font-family: inherit;
                font-size: inherit;
                outline: none;

                padding: .5em;
            }

            .colour-button.active {
                background-color: #B3DEFF;
            }
        </style>

        <title>Colour</title>
    </head>

    <body>
        <div class="colour-bg">
            <div class="colour-container">
                <button class="colour-button" data-type="hex">Hex</button>
                <button class="colour-button" data-type="rgba">RGBA</button>
                <button class="colour-button" data-type="hsla">HSLA</button>

                <br/><br/>

                <form>
                    <div class="colour-inputs" data-type="hex">
                        <input id="hex-input" value="#00000000" pattern="^#?[\da-fA-F]{3,8}$"/>
                    </div>
                    <div class="colour-inputs" data-type="rgba">
                        <input id="rgba-r-input" type="range" value="0" min="0" max="255"/>
                        <input id="rgba-g-input" type="range" value="0" min="0" max="255"/>
                        <input id="rgba-b-input" type="range" value="0" min="0" max="255"/>
                        <input id="rgba-a-input" type="range" value="1" min="0" max="1" step="0.01"/>
                    </div>
                    <div class="colour-inputs" data-type="hsla">
                        <input id="hsla-h-input" type="range" value="0" min="0" max="359"/>
                        <input id="hsla-s-input" type="range" value="0" min="0" max="1" step="0.01"/>
                        <input id="hsla-l-input" type="range" value="0" min="0" max="1" step="0.01"/>
                        <input id="hsla-a-input" type="range" value="1" min="0" max="1" step="0.01"/>
                    </div>
                </form>

                <br/>

                <span id="colour-hex"></span>
                <br/><br/>
                <span id="colour-rgba"></span>
                <br/><br/>
                <span id="colour-hsla"></span>
            </div>
        </div>

        <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="//code.jquery.com/color/jquery.color-2.1.2.min.js"></script>
        <script>
            $(function() {
                // don't make a form refresh the page when 'enter' is hit
                $("form").submit(function() {
                    return false;
                });

                var currentColourInput = "rgba";

                // every 25 milliseconds, update our colour
                setInterval(updateColour, 25);

                // show the correct controls when a colour button is clicked
                $(".colour-button").click(function()
                {
                    currentColourInput = $(this).data("type");

                    // remove all active buttons then add the class to the clicked button
                    $(".colour-button").removeClass("active");
                    $(this).addClass("active");

                    // hide all inputs then show the one we need
                    $(".colour-inputs").hide();
                    $(".colour-inputs[data-type='" + currentColourInput + "']").show();
                });

                // select rgba colour input type by default
                $(".colour-button[data-type='rgba']").click();

                // start out with a random colour by default for fun
                $("#rgba-r-input").val(Math.floor(Math.random() * 255));
                $("#rgba-g-input").val(Math.floor(Math.random() * 255));
                $("#rgba-b-input").val(Math.floor(Math.random() * 255));

                var oldColour;

                // read the inputted colour info and update
                function updateColour()
                {
                    var colour;

                    // read the correct colour input type (rgba, hsla, or hex)
                    switch (currentColourInput)
                    {
                        case "hex":
                            var hex = $("#hex-input").val();
                            var hexA = 1;

                            if (hex.charAt(0) !== '#')
                            {
                                hex = '#' + hex;
                            }

                            // if we have information about the alpha, use it
                            if (hex.length === 8 || hex.length === 9)
                            {
                                // get the last 1 or 2 characters to get the alpha info
                                var lastSubStr = hex.substr(hex.length - (hex.length === 8 ? 1 : 2));

                                // convert the hex alpha info to decimal then get the percentage (for jQuery Color)
                                hexA = parseInt(lastSubStr, 16) / 255;
                            }

                            colour = $.Color(hex);
                            colour = colour.alpha(hexA);

                            break;

                        case "rgba":
                            var rgbaR = $("#rgba-r-input").val();
                            var rgbaG = $("#rgba-g-input").val();
                            var rgbaB = $("#rgba-b-input").val();
                            var rgbaA = $("#rgba-a-input").val();

                            colour = $.Color(rgbaR, rgbaG, rgbaB, rgbaA);
                            break;

                        case "hsla":
                            var hslaH = $("#hsla-h-input").val();
                            var hslaS = $("#hsla-s-input").val();
                            var hslaL = $("#hsla-l-input").val();
                            var hslaA = $("#hsla-a-input").val();

                            colour = $.Color({ hue: hslaH, saturation: hslaS, lightness: hslaL });
                            colour = colour.alpha(hslaA);
                            break;
                    }

                    // if this colour hasn't changed since last time, no need to update all the things
                    if ( ! oldColour || colour.toHexString(true) !== oldColour.toHexString(true))
                    {
                        oldColour = colour;
                    }
                    else
                    {
                        return;
                    }

                    // update all inputs
                    if (currentColourInput !== "hex")
                    {
                        $("#hex-input").val(colour.toHexString(true).toUpperCase());
                    }

                    if (currentColourInput !== "rgba")
                    {
                        $("#rgba-r-input").val(colour.red());
                        $("#rgba-g-input").val(colour.green());
                        $("#rgba-b-input").val(colour.blue());
                        $("#rgba-a-input").val(colour.alpha());
                    }

                    if (currentColourInput !== "hsla")
                    {
                        $("#hsla-h-input").val(colour.hue());
                        $("#hsla-s-input").val(colour.saturation());
                        $("#hsla-l-input").val(colour.lightness());
                        $("#hsla-a-input").val(colour.alpha());
                    }

                    // update all results
                    $(".colour-bg").css("background-color", colour.toRgbaString());
                    $("#colour-hex").text(colour.toHexString(true).toUpperCase() + " / " + colour.toHexString().toUpperCase());
                    $("#colour-rgba").text(colour.toRgbaString());
                    $("#colour-hsla").text(colour.toHslaString());
                }
            });
        </script>
    </body>

</html>


